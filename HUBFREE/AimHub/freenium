--// ThaiHub / Strong Aim + Center FOV (Gunfight Arena)

getgenv().ThaiHubAim = {
    Enabled = false,
    Radius = 150,        -- FOV (pixel)
    MaxDistance = 400,   -- kho·∫£ng c√°ch 3D
    Smoothness = 0.15,   -- <1 = m∆∞·ª£t | 1 = lock c·ª©ng
    AimPart = "Head",
    ShowFOV = true
}

--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

--// UI
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "ThaiHub_Aim"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0,160,0,45)
frame.Position = UDim2.new(0.5,-80,0.8,0)
frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
frame.Active = true
frame.Draggable = true
frame.BorderSizePixel = 0
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,12)

local btn = Instance.new("TextButton", frame)
btn.Size = UDim2.new(1,0,1,0)
btn.BackgroundTransparency = 1
btn.Font = Enum.Font.GothamBold
btn.TextSize = 14
btn.TextColor3 = Color3.new(1,1,1)
btn.Text = "üéØ ThaiHub AIM : OFF"

btn.MouseButton1Click:Connect(function()
    ThaiHubAim.Enabled = not ThaiHubAim.Enabled
    btn.Text = ThaiHubAim.Enabled and "üéØ ThaiHub AIM : ON" or "üéØ ThaiHub AIM : OFF"
end)

--// FOV Circle (Center Screen)
local fov = Drawing.new("Circle")
fov.Color = Color3.fromRGB(255, 0, 0)
fov.Thickness = 2
fov.NumSides = 100
fov.Filled = false
fov.Visible = false

--// Get Screen Center
local function GetScreenCenter()
    local v = Camera.ViewportSize
    return Vector2.new(v.X / 2, v.Y / 2)
end

--// Get Target (li√™n t·ª•c)
local function GetTarget()
    local closest = nil
    local shortest = ThaiHubAim.Radius
    local screenCenter = GetScreenCenter()

    for _, plr in pairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character then
            local char = plr.Character
            local part = char:FindFirstChild(ThaiHubAim.AimPart)
            local hum = char:FindFirstChildOfClass("Humanoid")

            if part and hum and hum.Health > 0 then
                local pos, visible = Camera:WorldToViewportPoint(part.Position)
                if visible then
                    local dist2D = (Vector2.new(pos.X, pos.Y) - screenCenter).Magnitude
                    local dist3D = (part.Position - Camera.CFrame.Position).Magnitude

                    if dist2D < shortest and dist3D <= ThaiHubAim.MaxDistance then
                        shortest = dist2D
                        closest = part
                    end
                end
            end
        end
    end

    return closest
end

--// Aim Loop (Aim li√™n t·ª•c)
RunService.RenderStepped:Connect(function()
    local screenCenter = GetScreenCenter()

    -- FOV update
    fov.Position = screenCenter
    fov.Radius = ThaiHubAim.Radius
    fov.Visible = ThaiHubAim.Enabled and ThaiHubAim.ShowFOV

    if not ThaiHubAim.Enabled then
        return
    end

    local target = GetTarget()
    if target then
        local camPos = Camera.CFrame.Position
        local targetPos = target.Position
        local newCF = CFrame.new(camPos, targetPos)

        if ThaiHubAim.Smoothness >= 1 then
            Camera.CFrame = newCF
        else
            Camera.CFrame = Camera.CFrame:Lerp(newCF, ThaiHubAim.Smoothness)
        end
    end
end)
