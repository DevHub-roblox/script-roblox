getgenv().AutoClick = false

-- Services
local Players = game:GetService("Players")
local VirtualUser = game:GetService("VirtualUser")
local player = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- Anti AFK
player.Idled:Connect(function()
    VirtualUser:Button2Down(Vector2.new(0,0), Camera.CFrame)
    task.wait(1)
    VirtualUser:Button2Up(Vector2.new(0,0), Camera.CFrame)
end)

-- Auto Click CENTER
task.spawn(function()
    while true do
        if getgenv().AutoClick then
            pcall(function()
                local center = Vector2.new(
                    Camera.ViewportSize.X / 2,
                    Camera.ViewportSize.Y / 2
                )
                VirtualUser:Button1Down(center, Camera.CFrame)
                VirtualUser:Button1Up(center, Camera.CFrame)
            end)
        end
        task.wait(0.03) -- tốc độ tối đa Roblox
    end
end)

-- ===== UI MINI =====
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "MiniAutoClickUI"

local Button = Instance.new("TextButton", ScreenGui)
Button.Size = UDim2.fromScale(0.18, 0.08)
Button.Position = UDim2.fromScale(0.41, 0.8)
Button.Text = "OFF"
Button.Font = Enum.Font.GothamBold
Button.TextScaled = true
Button.BackgroundColor3 = Color3.fromRGB(170,0,0)
Button.TextColor3 = Color3.new(1,1,1)
Button.BorderSizePixel = 0
Button.Active = true
Button.Draggable = true

Instance.new("UICorner", Button).CornerRadius = UDim.new(0,20)

-- Toggle
Button.MouseButton1Click:Connect(function()
    getgenv().AutoClick = not getgenv().AutoClick
    if getgenv().AutoClick then
        Button.Text = "ON"
        Button.BackgroundColor3 = Color3.fromRGB(0,200,0)
    else
        Button.Text = "OFF"
        Button.BackgroundColor3 = Color3.fromRGB(170,0,0)
    end
end)
